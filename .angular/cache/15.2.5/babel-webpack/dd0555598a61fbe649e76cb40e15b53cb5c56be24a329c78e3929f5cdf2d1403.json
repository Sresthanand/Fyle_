{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { SearchService } from '../../core/services/search.service';\nlet HomeComponent = class HomeComponent {\n  constructor(searchService) {\n    this.searchService = searchService;\n    this.searchResultBooks = [];\n    this.currentPage = 1; // Current page\n    this.totalPages = 1; // Total number of pages\n    this.totalEntries = 0; // Total number of entries in the search results\n    this.pageSize = 10; // Number of items per page\n    this.pagesArray = []; // Define and initialize pagesArray as an array of numbers\n    this.trendingSubjects = [{\n      name: 'JavaScript'\n    }, {\n      name: 'CSS'\n    }, {\n      name: 'HTML'\n    }, {\n      name: 'Harry Potter'\n    }, {\n      name: 'Crypto'\n    }];\n    this.bookSearch = new FormControl('');\n  }\n  ngOnInit() {\n    // this.bookSearch.valueChanges.pipe(debounceTime(300)).subscribe((value: string) => {\n    // });\n    this.searchBooks('', this.pageSize, this.currentPage);\n  }\n  changePageSize(action) {\n    if (action === 'up' && this.pageSize < 10) {\n      this.pageSize += 1;\n    } else if (action === 'down' && this.pageSize > 1) {\n      this.pageSize -= 1;\n    }\n    this.currentPage = 1;\n    this.searchBooks(this.bookSearch.value, this.pageSize, this.currentPage);\n  }\n  searchBooks(query, limit, page = 1) {\n    const offset = (page - 1) * this.pageSize;\n    this.searchService.searchBooks(query, limit, offset).subscribe(data => {\n      console.log('Data');\n      console.log(data);\n      this.searchResultBooks = data?.docs;\n      this.totalEntries = data?.numFound; // Set the totalEntries property\n      console.log;\n      this.currentPage = page;\n      this.totalPages = Math.ceil(data?.numFound / this.pageSize);\n      this.pagesArray = Array.from({\n        length: Math.min(5, this.totalPages)\n      }, (_, i) => i + 1);\n    });\n  }\n  goToPreviousPage() {\n    if (this.currentPage > 1) {\n      this.searchBooks(this.bookSearch.value, this.pageSize, this.currentPage - 1);\n    }\n  }\n  goToNextPage() {\n    if (this.currentPage < this.totalPages) {\n      this.searchBooks(this.bookSearch.value, this.pageSize, this.currentPage + 1);\n    }\n  }\n  goToPage(page) {\n    if (page > 0 && page <= this.totalPages) {\n      this.searchBooks(this.bookSearch.value, this.pageSize, page);\n    }\n  }\n};\nHomeComponent = __decorate([Component({\n  selector: 'front-end-internship-assignment-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n}), __metadata(\"design:paramtypes\", [SearchService])], HomeComponent);\nexport { HomeComponent };","map":{"version":3,"mappings":"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","names":["Component","FormControl","SearchService","HomeComponent","constructor","searchService","name","bookSearch","ngOnInit","searchBooks","pageSize","currentPage","changePageSize","action","value","query","limit","page","offset","subscribe","data","console","log","searchResultBooks","docs","totalEntries","numFound","totalPages","Math","ceil","pagesArray","Array","from","length","min","_","i","goToPreviousPage","goToNextPage","goToPage","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\SRESTH\\Desktop\\Fyle_\\Fyle_\\src\\app\\components\\home\\home.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { debounceTime, filter } from 'rxjs';\r\n\r\nimport { SearchService } from '../../core/services/search.service';\r\nimport { SearchBook } from 'src/app/core/models/search-book-response.model';\r\n\r\n@Component({\r\n  selector: 'front-end-internship-assignment-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.scss'],\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  bookSearch: FormControl;\r\n  searchResultBooks: SearchBook[] = [];\r\n\r\n  currentPage: number = 1; // Current page\r\n  totalPages: number = 1; // Total number of pages\r\n\r\n  totalEntries: number = 0; // Total number of entries in the search results\r\n\r\n\r\n  pageSize: number = 10; // Number of items per page\r\n  pagesArray: number[] = []; // Define and initialize pagesArray as an array of numbers\r\n\r\n  constructor(private searchService: SearchService) {\r\n    this.bookSearch = new FormControl('');\r\n  }\r\n\r\n  trendingSubjects: Array<any> = [\r\n    { name: 'JavaScript' },\r\n    { name: 'CSS' },\r\n    { name: 'HTML' },\r\n    { name: 'Harry Potter' },\r\n    { name: 'Crypto' },\r\n  ];\r\n\r\n  ngOnInit(): void {\r\n    // this.bookSearch.valueChanges.pipe(debounceTime(300)).subscribe((value: string) => {\r\n    // });\r\n    this.searchBooks('', this.pageSize, this.currentPage);\r\n  }\r\n\r\n  changePageSize(action: string) {\r\n    if (action === 'up' && this.pageSize < 10) {\r\n      this.pageSize += 1;\r\n    } else if (action === 'down' && this.pageSize > 1) {\r\n      this.pageSize -= 1;\r\n    }\r\n    this.currentPage = 1;\r\n    this.searchBooks(this.bookSearch.value, this.pageSize, this.currentPage);\r\n  }\r\n  \r\n\r\n  searchBooks(query: string, limit: number, page: number = 1) {\r\n    const offset = (page - 1) * this.pageSize;\r\n\r\n    this.searchService.searchBooks(query, limit, offset).subscribe((data) => {\r\n      console.log('Data');\r\n      console.log(data);\r\n\r\n      this.searchResultBooks = data?.docs;\r\n      this.totalEntries = data?.numFound; // Set the totalEntries property\r\n\r\n      console.log\r\n\r\n\r\n\r\n      this.currentPage = page;\r\n      this.totalPages = Math.ceil(data?.numFound / this.pageSize);\r\n\r\n    \r\n    this.pagesArray = Array.from({ length: Math.min(5, this.totalPages) }, (_, i) => i + 1);\r\n    });\r\n  }\r\n\r\n  goToPreviousPage() {\r\n    if (this.currentPage > 1) {\r\n      this.searchBooks(this.bookSearch.value, this.pageSize, this.currentPage - 1);\r\n    }\r\n  }\r\n\r\n  goToNextPage() {\r\n    if (this.currentPage < this.totalPages) {\r\n      this.searchBooks(this.bookSearch.value, this.pageSize, this.currentPage + 1);\r\n    }\r\n  }\r\n\r\n  goToPage(page: number) {\r\n    if (page > 0 && page <= this.totalPages) {\r\n      this.searchBooks(this.bookSearch.value, this.pageSize, page);\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}